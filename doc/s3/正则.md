# JavaScript 正则表达式

正则表达式是一种强大的字符串匹配工具，在 JavaScript 中也得到了广泛应用。本文将介绍 JavaScript 中的正则表达式的高级概念和注意事项。

## 创建正则表达式

在 JavaScript 中，可以使用两种方式来创建正则表达式：

1. 字面量方式：使用斜杠（`/`）将正则表达式包裹起来。

   ```javascript
   const regex = /pattern/;
   ```

2. 构造函数方式：使用 `RegExp` 构造函数来创建正则表达式。

   ```javascript
   const regex = new RegExp("pattern");
   ```

## 正则表达式修饰符

在正则表达式的尾部，可以添加修饰符来改变其行为。

- `i`：不区分大小写匹配。
- `g`：全局匹配，找到所有匹配而不仅仅是第一个。
- `m`：多行匹配，允许 `^` 和 `$` 匹配每一行的开头和结尾。

示例：

```javascript
const regex = /pattern/gi;
```

## 常用元字符

以下是一些常用的正则表达式元字符：

- `.`：匹配除换行符之外的任意字符。
- `\w`：匹配任意字母、数字或下划线。
- `\d`：匹配任意数字。
- `\s`：匹配任意空白字符。
- `\b`：匹配单词边界。

示例：

```javascript
const regex = /\w+\d\b/g;
```

## 特殊字符转义

如果需要匹配特殊字符本身，需要使用反斜杠（`\`）对其进行转义。

示例：

```javascript
const regex = /\(hello\)/;
```

## 量词

使用量词可以指定匹配的次数。

- `*`：零次或多次匹配。
- `+`：一次或多次匹配。
- `?`：零次或一次匹配。
- `{n}`：匹配 n 次。
- `{n,}`：至少匹配 n 次。
- `{n,m}`：匹配 n 到 m 次。

示例：

```javascript
const regex = /\d{3}-\d{4}/;
```

## 分组和捕获

使用圆括号（`()`）进行分组，并且可以通过 `\1`、`\2` 等来捕获匹配的结果。

示例：

```javascript
const regex = /(\w+)\s\1/;
```

## 贪婪与非贪婪匹配

默认情况下，正则表达式是贪婪匹配，会尽可能多地匹配字符。可以使用 `?` 将其改为非贪婪匹配。

示例：

```javascript
const regex = /a.+b/;
const nonGreedyRegex = /a.+?b/;
```

## 注意事项

- 正则表达式中的点号（`.`）不会匹配换行符，需要使用 `[\s\S]` 来匹配包括换行符在内的任意字符。
- 转义字符 `\` 本身也需要进行转义，即 `\\` 表示匹配反斜杠。
- 使用量词时要小心过度匹配，确保正则表达式能够正确地满足匹配要求。

## 常用正则
1. 匹配邮箱地址：
   ```javascript
   const regex = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;
   ```

2. 匹配 URL：
   ```javascript
   const regex = /^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/;
   ```

3. 匹配日期（YYYY-MM-DD）：
   ```javascript
   const regex = /^\d{4}-\d{2}-\d{2}$/;
   ```

4. 匹配手机号码：
   ```javascript
   const regex = /^1[34578]\d{9}$/;
   ```

5. 匹配身份证号码（15位或18位）：
   ```javascript
   const regex = /(^\d{15}$)|(^\d{17}(\d|X)$)/;
   ```

6. 匹配 IP 地址：
   ```javascript
   const regex = /^((25[0-5]|2[0-4]\d|[01]?\d?\d)\.){3}(25[0-5]|2[0-4]\d|[01]?\d?\d)$/;
   ```

7. 匹配 HTML 标签：
   ```javascript
   const regex = /<([a-z]+)([^<]+)*(?:>(.*)<\/\1>|\s+\/>)/;
   ```

8. 匹配中文字符：
   ```javascript
   const regex = /^[\u4e00-\u9fa5]+$/;
   ```